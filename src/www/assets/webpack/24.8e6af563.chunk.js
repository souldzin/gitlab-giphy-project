(this.webpackJsonp=this.webpackJsonp||[]).push([[24],{"+h6Y":function(e,t,l){"use strict";var a=l("4pZC"),i=l.n(a),s=l("+lve"),r=l("teVv"),n=l("mpzd"),o=l("t9l/"),d=l("dYBJ"),c=l("5ee2"),u=l("OwKD"),p=l("cuRJ"),b=l("OkMp"),h=l("0X+3"),g=l("u1ru"),f=l("/LsX"),m=l("h93Y"),v=l("m6pR"),w=l("zLBL"),y=l("JBkr"),C=l("Cf2W"),k=l.n(C),L=l("nnCV"),S={components:{GlDropdownForm:v.a,GlDropdownItem:h.a,GlLoadingIcon:w.a,GlIntersectionObserver:y.a,LabelItem:L.a},model:{prop:"localSelectedLabels"},props:{allowMultiselect:{type:Boolean,required:!0},localSelectedLabels:{type:Array,required:!0},fullPath:{type:String,required:!0},searchKey:{type:String,required:!0},workspaceType:{type:String,required:!0}},data:()=>({labels:[],isVisible:!1}),apollo:{labels:{query(){return c.x[this.workspaceType].query},variables(){return{fullPath:this.fullPath,searchTerm:this.searchKey}},skip(){return 1===this.searchKey.length||!this.isVisible},update:function(e){var t,l;return(null===(t=e.workspace)||void 0===t?void 0:null===(l=t.labels)||void 0===l?void 0:l.nodes)||[]},error(){Object(r.f)({message:Object(o.a)("Error fetching labels.")})}}},computed:{labelsFetchInProgress(){return this.$apollo.queries.labels.loading},localSelectedLabelsIds(){return this.localSelectedLabels.map((function(e){return Object(s.e)(e.id)}))},visibleLabels(){return this.searchKey?k.a.filter(this.labels,this.searchKey,{key:["title"]}):this.labels},showNoMatchingResultsMessage(){return Boolean(this.searchKey)&&0===this.visibleLabels.length},shouldHighlightFirstItem(){return""!==this.searchKey&&this.visibleLabels.length>0}},methods:{isLabelSelected(e){return this.localSelectedLabelsIds.includes(Object(s.e)(e.id))},scrollIntoViewIfNeeded(){const e=this.$refs.labelsListContainer.querySelector(".is-focused");if(e){const t=this.$refs.labelsListContainer.getBoundingClientRect(),l=e.getBoundingClientRect();l.bottom>t.bottom?this.$refs.labelsListContainer.scrollTop+=l.bottom-t.bottom:l.top<t.top&&(this.$refs.labelsListContainer.scrollTop-=t.top-l.top)}},updateSelectedLabels(e){let t;t=this.isLabelSelected(e)?this.localSelectedLabels.filter((function(t){let{id:l}=t;return l!==Object(s.e)(e.id)&&l!==e.id})):[...this.localSelectedLabels,e],this.$emit("input",t)},handleLabelClick(e){this.updateSelectedLabels(e),this.allowMultiselect||this.$emit("closeDropdown",this.localSelectedLabels)},onDropdownAppear(){this.isVisible=!0},selectFirstItem(){this.shouldHighlightFirstItem&&this.handleLabelClick(this.visibleLabels[0])}}},_=l("bPvS"),P=Object(_.a)(S,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("gl-intersection-observer",{on:{appear:e.onDropdownAppear}},[l("gl-dropdown-form",{staticClass:"labels-select-contents-list js-labels-list"},[l("div",{ref:"labelsListContainer",attrs:{"data-testid":"dropdown-content"}},[e.labelsFetchInProgress?l("gl-loading-icon",{staticClass:"labels-fetch-loading gl-align-items-center gl-w-full gl-h-full gl-mb-3",attrs:{size:"md"}}):[e._l(e.visibleLabels,(function(t,a){return l("gl-dropdown-item",{key:t.id,attrs:{"is-checked":e.isLabelSelected(t),"is-check-centered":!0,"is-check-item":!0,active:e.shouldHighlightFirstItem&&0===a,"active-class":"is-focused","data-testid":"labels-list"},nativeOn:{"!click":function(l){return l.stopPropagation(),e.handleLabelClick(t)}}},[l("label-item",{attrs:{label:t}})],1)})),e._v(" "),l("gl-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:e.showNoMatchingResultsMessage,expression:"showNoMatchingResultsMessage"}],staticClass:"gl-p-3 gl-text-center",attrs:{"data-testid":"no-results"}},[e._v("\n          "+e._s(e.__("No matching results"))+"\n        ")])]],2)])],1)}),[],!1,null,null,null).exports,T=l("y48Y"),D=l("ukhr");const q=function(e){return e===u.b.Sidebar},O=function(e){return e===u.b.Standalone};var j={components:{DropdownContentsLabelsView:P,DropdownContentsCreateView:m.a,DropdownHeader:D.a,DropdownFooter:T.a,GlButton:p.a,GlDropdown:b.a,GlDropdownItem:h.a,GlLink:g.a},props:{labelsCreateTitle:{type:String,required:!0},selectedLabels:{type:Array,required:!0},allowMultiselect:{type:Boolean,required:!0},labelsListTitle:{type:String,required:!0},dropdownButtonText:{type:String,required:!0},footerCreateLabelTitle:{type:String,required:!0},footerManageLabelTitle:{type:String,required:!0},variant:{type:String,required:!0},isVisible:{type:Boolean,required:!1,default:!1},fullPath:{type:String,required:!0},workspaceType:{type:String,required:!0},attrWorkspacePath:{type:String,required:!0},labelCreateType:{type:String,required:!0}},data(){return{showDropdownContentsCreateView:!1,localSelectedLabels:[...this.selectedLabels],isDirty:!1,searchKey:""}},computed:{dropdownContentsView(){return this.showDropdownContentsCreateView?"dropdown-contents-create-view":"dropdown-contents-labels-view"},dropdownTitle(){return this.showDropdownContentsCreateView?this.labelsCreateTitle:this.labelsListTitle},buttonText(){return this.localSelectedLabels.length?this.localSelectedLabels.length>1?Object(o.h)(Object(o.g)("LabelSelect|%{firstLabelName} +%{remainingLabelCount} more"),{firstLabelName:this.localSelectedLabels[0].title,remainingLabelCount:this.localSelectedLabels.length-1}):this.localSelectedLabels[0].title:this.dropdownButtonText||Object(o.a)("Label")},showDropdownFooter(){return!this.showDropdownContentsCreateView&&!this.isStandalone},isStandalone(){return O(this.variant)}},watch:{localSelectedLabels:{handler(){this.isDirty=!0},deep:!0},isVisible(e){e?(this.$refs.dropdown.show(),this.isDirty=!1,this.localSelectedLabels=this.selectedLabels):(this.$refs.dropdown.hide(),this.setLabels())},selectedLabels(e){this.isDirty||(this.localSelectedLabels=e)}},created(){this.debouncedSearchKeyUpdate=i()(this.setSearchKey,f.h)},beforeDestroy(){this.debouncedSearchKeyUpdate.cancel()},methods:{toggleDropdownContentsCreateView(){this.showDropdownContentsCreateView=!this.showDropdownContentsCreateView},toggleDropdownContent(){var e;this.toggleDropdownContentsCreateView(),null!==(e=this.$refs.dropdown)&&void 0!==e&&e.$refs.dropdown&&this.$refs.dropdown.$refs.dropdown.$_popper.scheduleUpdate()},setLabels(){this.isDirty&&this.$emit("setLabels",this.localSelectedLabels)},handleDropdownHide(){this.$emit("closeDropdown"),q(this.variant)||this.setLabels()},setSearchKey(e){this.searchKey=e},setFocus(){this.$refs.header.focusInput()},showDropdown(){this.$refs.dropdown.show()},clearSearch(){this.allowMultiselect&&!this.isStandalone&&(this.searchKey="",this.setFocus())},selectFirstItem(){this.$refs.dropdownContentsView.selectFirstItem()}}},I=Object(_.a)(j,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("gl-dropdown",{ref:"dropdown",staticClass:"gl-w-full gl-mt-2",attrs:{text:e.buttonText,"data-testid":"labels-select-dropdown-contents","data-qa-selector":"labels_dropdown_content"},on:{hide:e.handleDropdownHide,shown:e.setFocus},scopedSlots:e._u([{key:"header",fn:function(){return[l("dropdown-header",{ref:"header",attrs:{"search-key":e.searchKey,"labels-create-title":e.labelsCreateTitle,"labels-list-title":e.labelsListTitle,"show-dropdown-contents-create-view":e.showDropdownContentsCreateView,"is-standalone":e.isStandalone},on:{toggleDropdownContentsCreateView:e.toggleDropdownContent,closeDropdown:function(t){return e.$emit("closeDropdown")},input:e.debouncedSearchKeyUpdate,searchEnter:e.selectFirstItem}})]},proxy:!0},{key:"default",fn:function(){return[l(e.dropdownContentsView,{ref:"dropdownContentsView",tag:"component",attrs:{"search-key":e.searchKey,"allow-multiselect":e.allowMultiselect,"full-path":e.fullPath,"workspace-type":e.workspaceType,"attr-workspace-path":e.attrWorkspacePath,"label-create-type":e.labelCreateType},on:{hideCreateView:e.toggleDropdownContent,input:e.clearSearch},model:{value:e.localSelectedLabels,callback:function(t){e.localSelectedLabels=t},expression:"localSelectedLabels"}})]},proxy:!0},{key:"footer",fn:function(){return[e.showDropdownFooter?l("dropdown-footer",{attrs:{"footer-create-label-title":e.footerCreateLabelTitle,"footer-manage-label-title":e.footerManageLabelTitle},on:{toggleDropdownContentsCreateView:e.toggleDropdownContent}}):e._e()]},proxy:!0}])})}),[],!1,null,null,null).exports,V={components:{DropdownValue:l("AGyg").a,DropdownContents:I,SidebarEditableItem:d.a},inject:{allowLabelEdit:{default:!1}},props:{iid:{type:String,required:!1,default:""},fullPath:{type:String,required:!0},allowLabelRemove:{type:Boolean,required:!1,default:!1},allowMultiselect:{type:Boolean,required:!1,default:!1},variant:{type:String,required:!1,default:u.b.Sidebar},labelsFilterBasePath:{type:String,required:!1,default:""},labelsFilterParam:{type:String,required:!1,default:"label_name"},dropdownButtonText:{type:String,required:!1,default:Object(o.a)("Label")},labelsListTitle:{type:String,required:!1,default:Object(o.a)("Assign labels")},labelsCreateTitle:{type:String,required:!1,default:Object(o.a)("Create group label")},footerCreateLabelTitle:{type:String,required:!1,default:Object(o.a)("Create group label")},footerManageLabelTitle:{type:String,required:!1,default:Object(o.a)("Manage group labels")},issuableType:{type:String,required:!0},workspaceType:{type:String,required:!0},attrWorkspacePath:{type:String,required:!0},labelCreateType:{type:String,required:!0}},data:()=>({contentIsOnViewport:!0,issuableLabels:[],labelsSelectInProgress:!1,oldIid:null,sidebarExpandedOnClick:!1}),computed:{isLoading(){return this.labelsSelectInProgress||this.$apollo.queries.issuableLabels.loading},issuableLabelIds(){return this.issuableLabels.map((function(e){return e.id}))}},apollo:{issuableLabels:{query(){return c.o[this.issuableType].issuableQuery},skip(){return!q(this.variant)},variables(){return{iid:this.iid,fullPath:this.fullPath}},update(e){var t,l;return(null===(t=e.workspace)||void 0===t?void 0:null===(l=t.issuable)||void 0===l?void 0:l.labels.nodes)||[]},error(){Object(r.f)({message:Object(o.a)("Error fetching labels.")})}}},watch:{iid(e,t){this.oldIid=t}},mounted(){document.addEventListener("toggleSidebarRevealLabelsDropdown",this.handleCollapsedValueClick)},beforeDestroy(){document.removeEventListener("toggleSidebarRevealLabelsDropdown",this.handleCollapsedValueClick)},methods:{handleDropdownClose(e){""!==this.iid?this.updateSelectedLabels(this.getUpdateVariables(e)):this.$emit("updateSelectedLabels",{labels:e}),this.collapseEditableItem()},collapseEditableItem(){var e;null===(e=this.$refs.editable)||void 0===e||e.collapse(),this.sidebarExpandedOnClick&&(this.sidebarExpandedOnClick=!1,this.$emit("toggleCollapse"))},handleCollapsedValueClick(){var e=this;this.sidebarExpandedOnClick=!0,this.$emit("toggleCollapse"),i()((function(){e.$refs.editable.toggle(),e.$refs.dropdownContents.showDropdown()}),u.a)()},getUpdateVariables(e){let t=[];t=e.map((function(e){let{id:t}=e;return t}));const l=this.oldIid||this.iid,a={iid:l,projectPath:this.fullPath,labelIds:t};switch(this.issuableType){case n.c.Issue:return a;case n.c.MergeRequest:return{...a,operationMode:s.a.Replace};case n.c.Epic:return{iid:l,groupPath:this.fullPath,addLabelIds:t.map((function(e){return Object(s.e)(e)})),removeLabelIds:this.issuableLabelIds.filter((function(e){return!t.includes(e)})).map((function(e){return Object(s.e)(e)}))};default:return{}}},updateSelectedLabels(e){var t=this;this.labelsSelectInProgress=!0,this.$apollo.mutate({mutation:c.o[this.issuableType].mutation,variables:{input:e}}).then((function(e){var l,a,i,s,r,n,o;let{data:d}=e;if(null!==(l=d.updateIssuableLabels)&&void 0!==l&&null!==(a=l.errors)&&void 0!==a&&a.length)throw new Error;t.$emit("updateSelectedLabels",{id:null===(i=d.updateIssuableLabels)||void 0===i?void 0:null===(s=i.issuable)||void 0===s?void 0:s.id,labels:null===(r=d.updateIssuableLabels)||void 0===r?void 0:null===(n=r.issuable)||void 0===n?void 0:null===(o=n.labels)||void 0===o?void 0:o.nodes})})).catch((function(e){return Object(r.f)({message:Object(o.a)("An error occurred while updating labels."),captureError:!0,error:e})})).finally((function(){t.labelsSelectInProgress=!1}))},getRemoveVariables(e){const t={iid:this.iid,projectPath:this.fullPath};switch(this.issuableType){case n.c.Issue:return{...t,removeLabelIds:[e]};case n.c.MergeRequest:return{...t,labelIds:[e],operationMode:s.a.Remove};case n.c.Epic:return{iid:this.iid,removeLabelIds:[Object(s.e)(e)],groupPath:this.fullPath};default:return{}}},handleLabelRemove(e){this.updateSelectedLabels(this.getRemoveVariables(e)),this.$emit("onLabelRemove",e)},isDropdownVariantSidebar:q,isDropdownVariantStandalone:O,isDropdownVariantEmbedded:function(e){return e===u.b.Embedded}}},x=Object(_.a)(V,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"labels-select-wrapper gl-relative",class:{"is-standalone":e.isDropdownVariantStandalone(e.variant),"is-embedded":e.isDropdownVariantEmbedded(e.variant)},attrs:{"data-testid":"sidebar-labels","data-qa-selector":"labels_block"}},[e.isDropdownVariantSidebar(e.variant)?[l("sidebar-editable-item",{ref:"editable",attrs:{title:e.__("Labels"),loading:e.isLoading,"can-edit":e.allowLabelEdit},on:{open:function(t){e.oldIid=null}},scopedSlots:e._u([{key:"collapsed",fn:function(){return[l("dropdown-value",{attrs:{"disable-labels":e.labelsSelectInProgress,"selected-labels":e.issuableLabels,"allow-label-remove":e.allowLabelRemove,"labels-filter-base-path":e.labelsFilterBasePath,"labels-filter-param":e.labelsFilterParam},on:{onLabelRemove:e.handleLabelRemove,onCollapsedValueClick:e.handleCollapsedValueClick}},[e._t("default")],2)]},proxy:!0},{key:"default",fn:function(t){var a=t.edit;return[l("dropdown-value",{staticClass:"gl-mb-2",attrs:{"disable-labels":e.labelsSelectInProgress,"selected-labels":e.issuableLabels,"allow-label-remove":e.allowLabelRemove,"labels-filter-base-path":e.labelsFilterBasePath,"labels-filter-param":e.labelsFilterParam},on:{onLabelRemove:e.handleLabelRemove}},[e._t("default")],2),e._v(" "),l("dropdown-contents",{ref:"dropdownContents",attrs:{"dropdown-button-text":e.dropdownButtonText,"allow-multiselect":e.allowMultiselect,"labels-list-title":e.labelsListTitle,"footer-create-label-title":e.footerCreateLabelTitle,"footer-manage-label-title":e.footerManageLabelTitle,"labels-create-title":e.labelsCreateTitle,"selected-labels":e.issuableLabels,variant:e.variant,"is-visible":a,"full-path":e.fullPath,"workspace-type":e.workspaceType,"attr-workspace-path":e.attrWorkspacePath,"label-create-type":e.labelCreateType},on:{setLabels:e.handleDropdownClose,closeDropdown:e.collapseEditableItem}})]}}],null,!0)})]:l("dropdown-contents",{ref:"dropdownContents",attrs:{"allow-multiselect":e.allowMultiselect,"dropdown-button-text":e.dropdownButtonText,"labels-list-title":e.labelsListTitle,"footer-create-label-title":e.footerCreateLabelTitle,"footer-manage-label-title":e.footerManageLabelTitle,"labels-create-title":e.labelsCreateTitle,"selected-labels":e.issuableLabels,variant:e.variant,"full-path":e.fullPath,"workspace-type":e.workspaceType,"attr-workspace-path":e.attrWorkspacePath,"label-create-type":e.labelCreateType},on:{setLabels:e.handleDropdownClose}})],2)}),[],!1,null,null,null);t.a=x.exports},AGyg:function(e,t,l){"use strict";var a=l("ZMwX"),i=l.n(a),s=l("ly/8"),r=l("H8gz"),n=l("gcrt"),o=l("oj/M"),d=l("t9l/"),c={directives:{GlTooltip:s.a},components:{GlIcon:r.a,GlLabel:n.a},inject:["allowScopedLabels"],props:{disableLabels:{type:Boolean,required:!1,default:!1},selectedLabels:{type:Array,required:!0},allowLabelRemove:{type:Boolean,required:!0},labelsFilterBasePath:{type:String,required:!0},labelsFilterParam:{type:String,required:!0}},computed:{sortedSelectedLabels(){return i()(this.selectedLabels,(function(e){return Object(o.C)(e)?0:1}))},labelsList(){const e=this.selectedLabels.length?this.selectedLabels.slice(0,5).map((function(e){return e.title})).join(", "):Object(d.g)("LabelSelect|Labels");return this.selectedLabels.length>5?Object(d.h)(Object(d.g)("LabelSelect|%{labelsString}, and %{remainingLabelCount} more"),{labelsString:e,remainingLabelCount:this.selectedLabels.length-5}):e}},methods:{labelFilterUrl(e){return`${this.labelsFilterBasePath}?${this.labelsFilterParam}[]=${encodeURIComponent(e.title)}`},scopedLabel(e){return this.allowScopedLabels&&Object(o.C)(e)},removeLabel(e){this.$emit("onLabelRemove",e)},handleCollapsedClick(){this.$emit("onCollapsedValueClick")}}},u=l("bPvS"),p=Object(u.a)(c,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"value issuable-show-labels js-value",class:{"has-labels":e.selectedLabels.length},attrs:{"data-testid":"value-wrapper"}},[l("div",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.left.viewport",modifiers:{left:!0,viewport:!0}}],staticClass:"sidebar-collapsed-icon",attrs:{title:e.labelsList},on:{click:e.handleCollapsedClick}},[l("gl-icon",{attrs:{name:"labels"}}),e._v(" "),l("span",{staticClass:"gl-font-base gl-line-height-24"},[e._v(e._s(e.selectedLabels.length))])],1),e._v(" "),e.selectedLabels.length?e._l(e.sortedSelectedLabels,(function(t){return l("gl-label",{key:t.id,staticClass:"hide-collapsed",attrs:{"data-qa-selector":"selected_label_content","data-qa-label-name":t.title,title:t.title,description:t.description,"background-color":t.color,target:e.labelFilterUrl(t),scoped:e.scopedLabel(t),"show-close-button":e.allowLabelRemove,disabled:e.disableLabels,"tooltip-placement":"top"},on:{close:function(l){return e.removeLabel(t.id)}}})})):l("span",{staticClass:"text-secondary hide-collapsed",attrs:{"data-testid":"empty-placeholder"}},[e._t("default")],2)],2)}),[],!1,null,null,null);t.a=p.exports},dYBJ:function(e,t,l){"use strict";var a=l("cuRJ"),i=l("zLBL"),s=l("t9l/"),r={i18n:{unassigned:Object(s.a)("Unassigned")},components:{GlButton:a.a,GlLoadingIcon:i.a},inject:{canUpdate:{},isClassicSidebar:{default:!1}},props:{title:{type:String,required:!1,default:""},loading:{type:Boolean,required:!1,default:!1},initialLoading:{type:Boolean,required:!1,default:!1},isDirty:{type:Boolean,required:!1,default:!1},tracking:{type:Object,required:!1,default:function(){return{event:null,label:null,property:null}}},canEdit:{type:Boolean,required:!1,default:!0}},data:()=>({edit:!1}),computed:{editButtonText(){return this.isDirty?Object(s.a)("Apply"):Object(s.a)("Edit")}},destroyed(){window.removeEventListener("click",this.collapseWhenOffClick),window.removeEventListener("keyup",this.collapseOnEscape)},methods:{collapseWhenOffClick(e){let{target:t}=e;this.$el.contains(t)||this.collapse()},collapseOnEscape(e){let{key:t}=e;"Escape"===t&&this.collapse()},expand(){this.edit||(this.edit=!0,this.$emit("open"),window.addEventListener("click",this.collapseWhenOffClick),window.addEventListener("keyup",this.collapseOnEscape))},collapse(){let{emitEvent:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.edit&&(this.edit=!1,e&&this.$emit("close"),window.removeEventListener("click",this.collapseWhenOffClick),window.removeEventListener("keyup",this.collapseOnEscape))},toggle(){let{emitEvent:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.edit?this.collapse({emitEvent:e}):this.expand()}}},n=l("bPvS"),o=Object(n.a)(r,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",{staticClass:"gl-display-flex gl-align-items-center gl-line-height-20 gl-mb-2 gl-text-gray-900",on:{click:function(t){return t.target!==t.currentTarget?null:e.collapse(t)}}},[l("span",{staticClass:"hide-collapsed",attrs:{"data-testid":"title"},on:{click:e.collapse}},[e._v("\n      "+e._s(e.title)+"\n    ")]),e._v(" "),e._t("title-extra"),e._v(" "),e.loading||e.initialLoading?l("gl-loading-icon",{staticClass:"gl-ml-2 hide-collapsed",attrs:{size:"sm",inline:""}}):e._e(),e._v(" "),e.loading&&e.isClassicSidebar?l("gl-loading-icon",{staticClass:"gl-mx-auto gl-my-0 hide-expanded",attrs:{size:"sm",inline:""}}):e._e(),e._v(" "),e._t("collapsed-right"),e._v(" "),e.canUpdate&&!e.initialLoading&&e.canEdit?l("gl-button",{staticClass:"gl-text-gray-900! gl-ml-auto hide-collapsed gl-mr-n2 shortcut-sidebar-dropdown-toggle",attrs:{category:"tertiary",size:"small","data-testid":"edit-button","data-track-action":e.tracking.event,"data-track-label":e.tracking.label,"data-track-property":e.tracking.property,"data-qa-selector":"edit_link"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.toggle(t)},click:e.toggle}},[e._v("\n      "+e._s(e.editButtonText)+"\n    ")]):e._e()],2),e._v(" "),e.initialLoading?e._e():[l("div",{directives:[{name:"show",rawName:"v-show",value:!e.edit,expression:"!edit"}],staticClass:"gl-line-height-14",attrs:{"data-testid":"collapsed-content"}},[e._t("collapsed",[e._v(e._s(e.__("None")))])],2),e._v(" "),l("div",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"edit"}],class:{"gl-mt-3":!e.isClassicSidebar},attrs:{"data-testid":"expanded-content"}},[e._t("default",null,{edit:e.edit})],2)]],2)}),[],!1,null,null,null);t.a=o.exports},h93Y:function(e,t,l){"use strict";var a=l("Q04j"),i=l("cuRJ"),s=l("tSMP"),r=l("u1ru"),n=l("zLBL"),o=l("ly/8"),d=l("ENs1"),c=l("teVv"),u=l("t9l/"),p=l("5ee2"),b=l("tzcr"),h=l.n(b),g=l("OwKD");const f=Object(u.a)("Error creating label.");var m={components:{GlAlert:a.a,GlButton:i.a,GlFormInput:s.a,GlLink:r.a,GlLoadingIcon:n.a},directives:{GlTooltip:o.a},props:{fullPath:{type:String,required:!0},attrWorkspacePath:{type:String,required:!0},labelCreateType:{type:String,required:!0},workspaceType:{type:String,required:!0}},data:()=>({labelTitle:"",selectedColor:"",labelCreateInProgress:!1,error:void 0}),computed:{disableCreate(){return!this.labelTitle.length||!this.selectedColor.length||this.labelCreateInProgress},suggestedColors(){const e=gon.suggested_label_colors;return Object.keys(e).map((function(t){return{[t]:e[t]}}))},mutationVariables(){const e=this.labelCreateType===g.c.group?"groupPath":"projectPath";return{title:this.labelTitle,color:this.selectedColor,[e]:this.attrWorkspacePath}}},methods:{getColorCode:e=>Object.keys(e).pop(),getColorName:e=>Object.values(e).pop(),handleColorClick(e){this.selectedColor=this.getColorCode(e)},updateLabelsInCache(e,t){const{query:l}=p.x[this.workspaceType],a=e.readQuery({query:l,variables:{fullPath:this.fullPath,searchTerm:""}}),i=new Intl.Collator("en"),s=Object(d.a)(a,(function(e){const{nodes:l}=e.workspace.labels;l.push(t),l.sort((function(e,t){return i.compare(e.title,t.title)}))}));e.writeQuery({query:l,variables:{fullPath:this.fullPath,searchTerm:""},data:s})},async createLabel(){var e=this;this.labelCreateInProgress=!0;try{const{data:{labelCreate:t}}=await this.$apollo.mutate({mutation:h.a,variables:this.mutationVariables,update:function(t,l){let{data:{labelCreate:{label:a}}}=l;a&&e.updateLabelsInCache(t,a)}});t.errors.length?[this.error]=t.errors:this.$emit("hideCreateView")}catch{Object(c.f)({message:f})}this.labelCreateInProgress=!1}}},v=l("bPvS"),w=Object(v.a)(m,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"labels-select-contents-create js-labels-create"},[l("div",{staticClass:"dropdown-input"},[e.error?l("gl-alert",{staticClass:"gl-mb-3",attrs:{variant:"danger",dismissible:!1}},[e._v("\n      "+e._s(e.error)+"\n    ")]):e._e(),e._v(" "),l("gl-form-input",{attrs:{placeholder:e.__("Name new label"),autofocus:!0,"data-testid":"label-title-input"},model:{value:e.labelTitle,callback:function(t){e.labelTitle="string"==typeof t?t.trim():t},expression:"labelTitle"}})],1),e._v(" "),l("div",{staticClass:"dropdown-content gl-px-3"},[l("div",{staticClass:"suggest-colors suggest-colors-dropdown gl-mt-0! gl-mb-3!"},e._l(e.suggestedColors,(function(t,a){return l("gl-link",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip:tooltipcontainer",arg:"tooltipcontainer"}],key:a,style:{backgroundColor:e.getColorCode(t)},attrs:{title:e.getColorName(t)},on:{click:function(l){return l.preventDefault(),e.handleColorClick(t)}}})})),1),e._v(" "),l("div",{staticClass:"color-input-container gl-display-flex"},[l("span",{staticClass:"dropdown-label-color-preview gl-relative gl-display-inline-block",style:{backgroundColor:e.selectedColor},attrs:{"data-testid":"selected-color"}}),e._v(" "),l("gl-form-input",{staticClass:"gl-rounded-top-left-none gl-rounded-bottom-left-none",attrs:{placeholder:e.__("Use custom color #FF0000"),"data-testid":"selected-color-text"},model:{value:e.selectedColor,callback:function(t){e.selectedColor="string"==typeof t?t.trim():t},expression:"selectedColor"}})],1)]),e._v(" "),l("div",{staticClass:"dropdown-actions gl-display-flex gl-justify-content-space-between gl-pt-3 gl-px-3"},[l("gl-button",{staticClass:"gl-display-flex gl-align-items-center",attrs:{disabled:e.disableCreate,category:"primary",variant:"success","data-testid":"create-button"},on:{click:e.createLabel}},[e.labelCreateInProgress?l("gl-loading-icon",{staticClass:"mr-1",attrs:{size:"sm",inline:!0}}):e._e(),e._v("\n      "+e._s(e.__("Create"))+"\n    ")],1),e._v(" "),l("gl-button",{staticClass:"js-btn-cancel-create",attrs:{"data-testid":"cancel-button"},on:{click:function(t){return t.stopPropagation(),e.$emit("hideCreateView")}}},[e._v("\n      "+e._s(e.__("Cancel"))+"\n    ")])],1)])}),[],!1,null,null,null);t.a=w.exports},nnCV:function(e,t,l){"use strict";var a={props:{label:{type:Object,required:!0}}},i=l("bPvS"),s=Object(i.a)(a,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"gl-display-flex gl-align-items-center"},[t("span",{staticClass:"dropdown-label-box gl-flex-shrink-0 gl-top-0 gl-mr-3",style:{"background-color":this.label.color},attrs:{"data-testid":"label-color-box"}}),this._v(" "),t("span",[this._v(this._s(this.label.title))])])}),[],!1,null,null,null);t.a=s.exports},tzcr:function(e,t,l){var a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"createLabel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"title"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"color"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"projectPath"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"groupPath"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"labelCreate"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"title"},value:{kind:"Variable",name:{kind:"Name",value:"title"}}},{kind:"ObjectField",name:{kind:"Name",value:"color"},value:{kind:"Variable",name:{kind:"Name",value:"color"}}},{kind:"ObjectField",name:{kind:"Name",value:"projectPath"},value:{kind:"Variable",name:{kind:"Name",value:"projectPath"}}},{kind:"ObjectField",name:{kind:"Name",value:"groupPath"},value:{kind:"Variable",name:{kind:"Name",value:"groupPath"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Label"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:316}};a.loc.source={body:'#import "~/graphql_shared/fragments/label.fragment.graphql"\n\nmutation createLabel($title: String!, $color: String, $projectPath: ID, $groupPath: ID) {\n  labelCreate(\n    input: { title: $title, color: $color, projectPath: $projectPath, groupPath: $groupPath }\n  ) {\n    label {\n      ...Label\n    }\n    errors\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};a.definitions=a.definitions.concat(l("NwwH").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!i[t]&&(i[t]=!0,!0)})));var s={};function r(e,t){for(var l=0;l<e.definitions.length;l++){var a=e.definitions[l];if(a.name&&a.name.value==t)return a}}a.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,l){if("FragmentSpread"===t.kind)l.add(t.name.value);else if("VariableDefinition"===t.kind){var a=t.type;"NamedType"===a.kind&&l.add(a.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,l)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,l)})),t.definitions&&t.definitions.forEach((function(t){e(t,l)}))}(e,t),s[e.name.value]=t}})),e.exports=a,e.exports.createLabel=function(e,t){var l={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(l.loc=e.loc);var a=s[t]||new Set,i=new Set,n=new Set;for(a.forEach((function(e){n.add(e)}));n.size>0;){var o=n;n=new Set,o.forEach((function(e){i.has(e)||(i.add(e),(s[e]||new Set).forEach((function(e){n.add(e)})))}))}return i.forEach((function(t){var a=r(e,t);a&&l.definitions.push(a)})),l}(a,"createLabel")},ukhr:function(e,t,l){"use strict";var a=l("cuRJ"),i=l("6HTq"),s={components:{GlButton:a.a,GlSearchBoxByType:i.a},props:{labelsCreateTitle:{type:String,required:!0},labelsListTitle:{type:String,required:!0},showDropdownContentsCreateView:{type:Boolean,required:!0},labelsFetchInProgress:{type:Boolean,required:!1,default:!1},searchKey:{type:String,required:!0},isStandalone:{type:Boolean,required:!1,default:!1}},computed:{dropdownTitle(){return this.showDropdownContentsCreateView?this.labelsCreateTitle:this.labelsListTitle}},methods:{focusInput(){var e;null===(e=this.$refs.searchInput)||void 0===e||e.focusInput()}}},r=l("bPvS"),n=Object(r.a)(s,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{attrs:{"data-testid":"dropdown-header"}},[e.isStandalone?e._e():l("div",{staticClass:"dropdown-title gl-display-flex gl-align-items-center gl-pt-0 gl-pb-3!",attrs:{"data-testid":"dropdown-header-title"}},[e.showDropdownContentsCreateView?l("gl-button",{staticClass:"js-btn-back dropdown-header-button gl-p-0",attrs:{"aria-label":e.__("Go back"),variant:"link",size:"small",icon:"arrow-left","data-testid":"go-back-button"},on:{click:function(t){return t.stopPropagation(),e.$emit("toggleDropdownContentsCreateView")}}}):e._e(),e._v(" "),l("span",{staticClass:"gl-flex-grow-1"},[e._v(e._s(e.dropdownTitle))]),e._v(" "),l("gl-button",{staticClass:"dropdown-header-button gl-p-0!",attrs:{"aria-label":e.__("Close"),variant:"link",size:"small",icon:"close","data-testid":"close-button"},on:{click:function(t){return e.$emit("closeDropdown")}}})],1),e._v(" "),e.showDropdownContentsCreateView?e._e():l("gl-search-box-by-type",{ref:"searchInput",attrs:{value:e.searchKey,disabled:e.labelsFetchInProgress,"data-qa-selector":"dropdown_input_field","data-testid":"dropdown-input-field"},on:{input:function(t){return e.$emit("input",t)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$emit("searchEnter",t)}}})],1)}),[],!1,null,null,null);t.a=n.exports},y48Y:function(e,t,l){"use strict";var a={components:{GlDropdownItem:l("0X+3").a},inject:["allowLabelCreate","labelsManagePath"],props:{footerCreateLabelTitle:{type:String,required:!0},footerManageLabelTitle:{type:String,required:!0}}},i=l("bPvS"),s=Object(i.a)(a,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{attrs:{"data-testid":"dropdown-footer"}},[e.allowLabelCreate?l("gl-dropdown-item",{attrs:{"data-testid":"create-label-button"},nativeOn:{"!click":function(t){return t.stopPropagation(),e.$emit("toggleDropdownContentsCreateView")}}},[e._v("\n    "+e._s(e.footerCreateLabelTitle)+"\n  ")]):e._e(),e._v(" "),l("gl-dropdown-item",{attrs:{href:e.labelsManagePath},nativeOn:{"!click":function(e){e.stopPropagation()}}},[e._v("\n    "+e._s(e.footerManageLabelTitle)+"\n  ")])],1)}),[],!1,null,null,null);t.a=s.exports}}]);
//# sourceMappingURL=24.8e6af563.chunk.js.map